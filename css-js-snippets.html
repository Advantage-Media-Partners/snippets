<!-- 
    Snippets for customizing navigation & other features for websites

    For more detailed instructions on use refer to documentation 

    1. jQuery WP wrapper
    2. Change navigation bg color on scroll CSS & JS
    3. Slide navigation into view on scroll CSS & JS
    4. Create and Check for cookie for age-overlay JS 
    5. Change logo width in custom navigation on scroll 
    6. Before & After Borders CSS
    7. Blur sections when hovering on another section ( blur one column while hovering on adjacent column )
    8. Gravity Forms date picker restriction 
    9. Hide/Show nav on scroll down/up

-->

<!--- 1. jQuery wrapper for wordpress --->

<script>
(function($) {
	
	// when writing jQuery in WP you need to wrap everything in this function in order to $ selector
	
})( jQuery );
</script>

<!-- 2. Change navigation background color after scroll -->
<style>
    #nav-menu-scroll {
      background-color: transparent;
      transition: all .5s;
      height: 100px;
    }
  </style>
  <script>
  (function($) {
      $( document ).ready(function() {
      let menu = $('#nav-menu-scroll');
          document.addEventListener('scroll', () => {
              if(window.scrollY > 200) {
                  menu.css("background-color", "black");
              } else {
                  menu.css("background-color", "transparent");
              }
          });
      });	
  })( jQuery );
  </script>

<!-- 3. Slide Down navigation on scroll -->  
<style>
        #nav-menu-scroll {
        position: fixed;
        top: -200px; 
        width: 100%;
        transition: all .5s;
    }

    .fixed {
        top: 0px !important; 
    }
</style>
<script>
    (function($) {
        $( document ).ready(function() {
            let menu = $('#nav-menu-scroll');
            document.addEventListener('scroll', () => {
                if(window.scrollY > 200) {
                    menu.addClass('fixed');
                } else {
                    menu.removeClass('fixed');
                }
            });
        });	
    })( jQuery );
    </script>

<!-- 4. Create and check for cookie for age overlay -->

<script>
    (function($) {
      // SET AGE COOKIES 
      var allCookies = document.cookie;
      function checkAge() {
        if(allCookies.search('age-wall=yes') == 0) {
             $('#age-wall-overlay').hide();
              console.log('you shall pass');
          } else {
            console.log('you shall not pass');
            $('#age-wall-overlay').css('display','flex');
          $('#age-yes').click(function(e){
            e.preventDefault();
            document.cookie='age-wall=yes;path=/;';
            $('#age-wall-overlay').hide();
          });
          $('#age-no').click(function(e){	
              e.preventDefault();
              alert('Sorry, you must be at least 21 to enter.')
          });
        }
      }
    window.addEventListener('load', checkAge);
    })( jQuery );
    </script> 

<!-- 5. Change Navigation Logo Size on scroll ( Custom Menu )  -->

<script>
$(window).scroll(()=>{
    if (window.scrollY > 80) {
		$('#nav-logo').css('width', '100px');
    } else {
		$('#nav-logo').css('width', '125px');
    } 
  });
</script>

<!-- 6. Before & After Borders CSS  -->
<!-- omit the selector tags if using in a Divi module - use custom css options within module -->

<style>
::before {
  content: '';
  background: black;
  position: absolute;
  width: 45px;
  height: 5px;
  right: -10px;
  top: 0;
}

::after {
  content: '';
  background: black;
  position: absolute;
  width: 5px;
  height: 45px;
  right: -10px;
  top: 0;
}
</style>

<!-- 7. blur sections on hover -->
<style>
  /** add ID's to each column and replace fishing & delivery ID's below **/
  #fishing, #delivery {
    transition: all .5s;
  }
  .blurred {
    filter: blur(4px);
  }
</style>
<script>
  (function($) {
    
    // add ID's to each column and replace fishing & delivery ID's below
    let target1 = $('#fishing');
    let target2 = $('#delivery');

    console.log(target1);

    target1.hover(
      () => {
        target2.addClass('blurred');
      },
      ()=>{
      	target2.removeClass('blurred');
    });
    
    target2.hover(
      () => {
        target1.addClass('blurred');
      },
      ()=>{
      	target1.removeClass('blurred');
    });
  })( jQuery );
</script>
  
<!--     8. Gravity Forms date picker restriction   -->
<!-- Add HTML block to gravity forms and add following script there -->
<!-- Identify the ID of the field with the date and replace in snippet -->


<script type="text/javascript">
    Date.prototype.addDays = function(days) {
        var date = new Date(this.valueOf());
        date.setDate(date.getDate() + days);
        return date;
    }
    let date = new Date();
    console.log(date.addDays(3));
    let orderDate = date.addDays(3);
    gform.addFilter( 'gform_datepicker_options_pre_init', function( optionsObj, formId, fieldId ) {
    if ( formId == 1 && fieldId == 7 ) {
    optionsObj.minDate = orderDate;
    }
    return optionsObj;
    } );
  </script>


<!-- 9. Hide/Show nav on scroll down/up  -->  
<!-- Section with nav-mneu-hide-on-scroll id should be position:fixed -->

<style>
  #nav-menu-hide-on-scroll {
    transition: all .5s;
  }
</style>
<script>
(function($) {
    $( document ).ready(function() {
    let menu = $('#nav-menu-hide-on-scroll');
        window.onscroll = function(e) {
          menu.css('top', '0%');
          if(this.oldScroll > this.scrollY == true) {
            menu.css('top', '0%');
          } else {
            menu.css('top', '-100%');
          }
          this.oldScroll = this.scrollY;
        }
    });	
})( jQuery );
</script>